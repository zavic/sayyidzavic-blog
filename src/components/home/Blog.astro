---
import FormattedDate from "@components/FormattedDate.astro";
import { Image } from "astro:assets";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog")).sort(
    (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<section id="blog" class="pt-20">
    <div class="mb-6 flex items-center gap-4">
        <h2 class="text-3xl font-bold">
            <span class="text-gradient">My</span> Blog
        </h2>
        <a href="/blog" class="py-1 px-3 rounded-lg border border-indigo-400 text-indigo-300 hover:bg-indigo-500 hover:text-indigo-50 font-sm">All</a>
    </div>
    <div class="grid md:grid-cols-4 gap-4">
        {
            posts.map((post) => (
                <div>
                    {post.data.heroImage && (
                        <Image
                            src={post.data.heroImage}
                            alt={post.data.title}
                            class="w-full object-cover rounded-lg"
                        />
                    )}

                    <div class="pt-2">
                        <a
                            href={`/blog/${post.id}/`}
                            class="text-xl font-bold mb-2 hover:text-indigo-500"
                        >
                            {post.data.title}
                        </a>
                        <p class="font-light text-sm pb-4">
                            <FormattedDate date={post.data.pubDate} />
                        </p>
                        {/* <p>{post.data.description}</p> */}
                    </div>
                </div>
            ))
        }
    </div>
</section>
